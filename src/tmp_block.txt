  useEffect(() => {
    const sections = ['home', 'about', 'method', 'testimonials', 'qualification', 'contact'];
const observer = new IntersectionObserver((entries) => {
  if (modalContent || interactionLock) return;
  let visibleSections = entries.filter(entry => entry.isIntersecting && entry.intersectionRatio > 0.4);
  if (visibleSections.length > 0) {
    // Берём последнюю видимую секцию по порядку в DOM
    const lastVisible = visibleSections[visibleSections.length - 1];
    setActiveSection(lastVisible.target.id);
  }
}, { rootMargin: '-20% 0px -20% 0px', threshold: [0.25, 0.5, 0.75] });
    sections.forEach(id => { const el = document.getElementById(id); if (el) observer.observe(el); });
    return () => sections.forEach(id => { const el = document.getElementById(id); if (el) observer.unobserve(el); });
  }, []);
